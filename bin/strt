#!/usr/bin/env node
const path = require('path');
const meow = require('meow');
const execa = require('execa');

const defaultCommand = 'dev';
const commands = new Set([
  'build',
  defaultCommand,
]);

const cli = meow(`
  Usage
    $ strt <command>

  Commands
    ${Array.from(commands).join(', ')}
`);

let cmd = cli.input[0];

// Check if command exists
if (cmd && !commands.has(cmd)) {
  console.error(`The command \`${cmd}\` does not exist. For more information use the --help flag.`);
  process.exit(0);
}

// Use default command if non is supplied
if (!commands.has(cmd)) {
  cmd = defaultCommand;
}

const bin = path.join(__dirname, `strt-${cmd}`);

execa(bin, { stdio: 'inherit' });

// console.log(process.cwd());

// console.log(cli);
